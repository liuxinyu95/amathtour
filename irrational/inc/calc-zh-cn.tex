\section{常用极限和导数}
\phantomsection
\label[appendix]{app:calculus}

通过观察单位圆上的正弦$\sin x$和\underdot{弧度}$x$（如\cref{fig:unit-circle-trigonometric}），弧长PQ等于$x$，它趋近于0时，正弦$\sin x$趋近于弧长，即：

\begin{figure}[htbp]
  \centering
  \begin{tikzpicture}[>=stealth,scale=3]

    % unit circle
    \draw[gray!50, dashed] (0,0) circle (1);

    \draw[->,thick] (-1.2,0) -- (1.2,0) node[right] {}; % x-axis
    \draw[->,thick] (0,-1.2) -- (0,1.2) node[above] {}; % y-axis
    \node[below left] at (0,0) {$O$};

    \def\theta{15} % degree
    \draw[dashed] (0,0) -- (\theta:1); % radius at \theta

    \draw[->] (1,0) arc (0:\theta:1) node[midway,right] {$x$};

    % P(x = cos x, y = sin x）
    \fill[black] (\theta:1) circle (0.02) node[right] {$P(\cos x, \sin x)$};

    \draw[red, thick] (\theta:1 |- 0,0) -- (0,0) node[midway,below] {$\cos x$};
    \draw[blue, thick] (\theta:1) -- (\theta:1 |- 0,0) node[midway,left] {$\sin x$};

    \fill[black] (1,0) circle (0.02) node[below right] {$Q(1,0)$};
  \end{tikzpicture}
  \caption{单位圆上的三角函数}
  \label{fig:unit-circle-trigonometric}
\end{figure}

\be
\lim_{x \to 0} \frac{\sin x}{x} = 1
\ee

\begin{proof}
我们用著名的“夹逼定理”（也叫做三明治定理）来证明这一极限。过\cref{fig:unit-circle-trigonometric}中的Q点作圆的切线交OP的延长线，这样就构成了外切弧PQ的直角三角形。它的两个直角边分别为1和$\tan x$。现在考虑弧PQ内接直角三角形（它的两个直角边分别为$\cos x$和$\sin x$）的面积$S_i$，弧PQ所在的扇形面积$S$，弧PQ外切直角三角形的面积$S_o$：

\begin{align*}
  S_i &< S < S_o \\
  \frac{1}{2}\cos x \sin x &< \frac{1}{2}x < \frac{1}{2}1\cdot \tan x \\
  \cos x \sin x &< x < \tan x = \frac{\sin x}{\cos x} \\
  \cos x &< \frac{x}{\sin x} < \frac{1}{\cos x} &&\text{两边除以}\sin x \\
  \frac{1}{\cos x} &> \frac{\sin x}{x} > \cos x &&{取倒数} \\
\end{align*}
注意这里我们限制了$x > 0$，现在对不等式取$x \to 0^+$极限。$\cos x$和它的倒数的极限都是1。所以中间所夹的$\dfrac{\sin x}{x}$的极限也是1。读者可以证明$x < 0$，从左侧逼近时的情况。
\end{proof}

\section{正切函数的连分数表示}
\phantomsection
\label[appendix]{app:tan-as-cfrac}

正切函数是正弦函数与余弦函数的商，代入$\sin x, \cos x$的展开式得：

\begin{align*}
\tan x & = \frac{\sin x}{\cos x} = \frac{x - \frac{x^3}{3!} + \frac{x^5}{5!} - \frac{x^7}{7!} + \dotsb}{1 - \frac{x^2}{2!} + \frac{x^4}{4!} - \frac{x^6}{6!} + \dotsb} \\
  &= x \frac{1 - \frac{x^2}{3!} + \frac{x^4}{5!} - \frac{x^6}{7!} + \dotsb}{1 - \frac{x^2}{2!} + \frac{x^4}{4!} - \frac{x^6}{6!} + \dotsb} && \text{分子提出}x \\
  &= \cfrac{x}{\frac{1 - \frac{x^2}{2!} + \frac{x^4}{4!} - \frac{x^6}{6!} + \dotsb}{1 - \frac{x^2}{3!} + \frac{x^4}{5!} - \frac{x^6}{7!} + \dotsb}} && x\frac{B}{A}\text{化为} \cfrac{x}{\frac{A}{B}}
\end{align*}

我们接下来用欧几里得算法把$\frac{A}{B}$部分转化成连分数。回忆一下整数的带余数除法：$A = QB + R$，其中$Q$是商，$0 \leq R < B$是余数。当我们把它扩展到级数$A = 1 - \frac{x^2}{2!} + \frac{x^4}{4!} - \frac{x^6}{6!} + \dotsb$，$B = 1 - \frac{x^2}{3!} + \frac{x^4}{5!} - \frac{x^6}{7!} + \dotsb$时，如何定义$R < B$呢？如果级数$R$中的每个$x^i$次项在$B$中也含有，反之在$B$中却含有不在$R$中的某个$x^j$次项，说明$B$中含有更丰富的项，我们定义$R < B$。例如，令$R = a_0 x^2 + a_1 x^3 + \dotsb$，$B = b_0 + b_1 x + b_2 x^2 + b_3 x^3 + \dotsb$，$R$中缺乏$B$中的常数项和一次项，所以$R < B$。用带余数的除法得到：

\begin{align*}
A &= QB + R \\
1 - \frac{x^2}{2!} + \frac{x^4}{4!} - \frac{x^6}{6!} + \dotsb &= 1(1 - \frac{x^2}{3!} + \frac{x^4}{5!} - \frac{x^6}{7!} + \dotsb) + R
\end{align*}

所以
\begin{align*}
R &= A - B = (1 - 1) -(\frac{1}{2!} - \frac{1}{3!})x^2 + (\frac{1}{4!} - \frac{1}{5!})x^4 -(\frac{1}{6!} - \frac{1}{7!})x^6 + \dotsb \\
  &= - \frac{2}{3!}x^2 + \frac{4}{5!}x^4 - \frac{6}{7!}x^6 + \dotsb \\
  &= - \frac{1}{3}\frac{1}{1!}x^2 + \frac{1}{5}\frac{1}{3!}x^4 - \frac{1}{7}\frac{1}{5!}x^6 + \dotsb \\
  &= -x^2(\frac{1}{3} - \frac{1}{5}\frac{1}{3!}x^2 + \frac{1}{7}\frac{1}{5!}x^4 + \dotsb) && \text{提取出}x^2 \\
  &= -x^2 A'
\end{align*}

其中第三步我们利用了关系$\dfrac{2n}{(2n + 1)!} = \dfrac{1}{2n+1}\dfrac{1}{(2n-1)!}$。此时连分数化成了：

\[
\tan x = \cfrac{x}{1 - x^2\frac{A'}{B}} = \cfrac{x}{1 - \cfrac{x^2}{\frac{B}{A'}}}
\]

接下来迭代地把$\frac{B}{A'}$化为连分数，其中$A' = \frac{1}{3} - \frac{1}{5}\frac{1}{3!}x^2 + \frac{1}{7}\frac{1}{5!}x^4 + \dotsb$。再次利用带余数除法：

\begin{align*}
B &= 3A' + R'  \\
1 - \frac{x^2}{3!} + \frac{x^4}{5!} - \frac{x^6}{7!} + \dotsb &= 3(\frac{1}{3} - \frac{1}{5}\frac{1}{3!}x^2 + \frac{1}{7}\frac{1}{5!}x^4 + \dotsb) + R'
\end{align*}

移项求出$R'$：

\begin{align*}
R' &= B - 3A' \\
   &= - \frac{2}{5}\frac{1}{3!}x^2 + \frac{4}{7}\frac{1}{5!}x^4 - \frac{6}{9}\frac{1}{7!}x^6 + \dotsb \\
   &= -x^2(\frac{1}{3 \cdot 5}\frac{1}{1!} - \frac{1}{5 \cdot 7}\frac{1}{3!}x^2 + \frac{1}{7 \cdot 9}\frac{1}{5!}x^4 - \dotsb) \\
   &= -x^2 A''
\end{align*}

这里我们利用了关系$\dfrac{2n}{2n+3}\dfrac{1}{(2n+1)!} = \dfrac{1}{(2n + 1)(2n + 3)}\dfrac{1}{(2n - 1)!}$。此时连分数化成了：

\[
\tan x = \cfrac{x}{1 - \cfrac{x^2}{3 - \cfrac{x^2}{\frac{A'}{A''}}}}
\]

用同样方法迭代求$\frac{A'}{A''}$的连分数表示，以此类推最终得到正切函数的连分数：

\begin{align*}
\tan x  &= \cfrac{x}{1 - \cfrac{x^2}{3 - \cfrac{x^2}{5 - \cfrac{x^2}{7 - \cfrac{x^2}{\dotso}}}}}
\end{align*}
